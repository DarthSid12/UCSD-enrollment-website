<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enrollment Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-md rounded-lg">
        <h1 class="text-2xl font-bold text-center mb-6">Enrollment Predictor</h1>
        <form id="enrollment-form" class="space-y-4">
            <!-- Enrollment Time -->
            <div>
                <label for="enrollment_time" class="block text-sm font-medium text-gray-700">Enrollment Time</label>
                <input type="datetime-local" id="enrollment_time" name="enrollment_time" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
            </div>

            <!-- Session -->
            <div>
                <label for="session" class="block text-sm font-medium text-gray-700">Session</label>
                <select id="session" name="session" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    <option value="Summer1">Summer1</option>
                    <option value="Spring">Spring</option>
                    <option value="Winter">Winter</option>
                    <option value="Fall">Fall</option>
                    <option value="Summer2">Summer2</option>
                    <option value="Summer3">Summer3</option>
                </select>
            </div>

            <!-- Year -->
            <div>
                <label for="enrollment_year" class="block text-sm font-medium text-gray-700">Year</label>
                <select id="enrollment_year" name="enrollment_year" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                </select>
            </div>

            <!-- Field -->
            <div>
                <label for="field" class="block text-sm font-medium text-gray-700">Field</label>
                <select id="field" name="field" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    <script>
                        const fields = ["AAS","AESE","AIP","ANAR","ANBI","ANES","ANSC","ANTH","AUD","AWP","BENG","BGGN","BGJC","BGRD","BGSE","BIBC","BICD","BIEB","BILD","BIMM","BIOM","BIPN","BISP","BNFO","CAT","CCE","CCS","CENG","CGS","CHEM","CHIN","CLAS","CLIN","CLRE","CMM","COGR","COGS","COMM","CSE","CSS","DDPM","DERM","DOC","DSC","DSE","DSGN","ECE","ECON","EDS","EMED","ENG","ENVR","ERC","ESYS","ETHN","ETIM","EXPR","FILM","FMPH","FPM","GLBH","GSS","HDS","HIAF","HIEA","HIEU","HIGL","HIGR","HILA","HILD","HINE","HISC","HITO","HIUS","HUM","INTL","JAPN","JWSP","LATI","LIAB","LIDS","LIFR","LIGM","LIGN","LIHL","LIIT","LIPO","LISL","LISP","LTAM","LTCH","LTCO","LTCS","LTEA","LTEN","LTEU","LTFR","LTGK","LTGM","LTKO","LTLA","LTRU","LTSP","LTTH","LTWL","LTWR","MAE","MATH","MATS","MBC","MCWP","MED","MGT","MMW","MSED","MUS","NANO","NEU","NEUG","OPTH","ORTH","PATH","PEDS","PH","PHAR","PHIL","PHYA","PHYS","POLI","PSY","PSYC","RAD","RELI","REV","RMAS","RMED","SE","SIO","SIOB","SIOC","SIOG","SOCE","SOCG","SOCI","SOMC","SOMI","SPPH","SPPS","SURG","SYN","TDAC","TDDE","TDDM","TDDR","TDGE","TDGR","TDHD","TDHT","TDMV","TDPF","TDPR","TDPW","TDTR","TMC","UROL","USP","VIS","WCWP","WES"];
                        fields.forEach(field => {
                            document.write(`<option value="${field}">${field}</option>`);
                        });
                    </script>
                </select>
            </div>

            <!-- Course Number -->
            <div>
                <label for="course" class="block text-sm font-medium text-gray-700">Course Number</label>
                <select id="course" name="course" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    <script>
                        for (let i = 1; i <= 200; i++) {
                            document.write(`<option value="${i}">${i}</option>`);
                        }
                    </script>
                </select>
            </div>

            <!-- Submit Button -->
            <div>
                <button type="button" id="submit-button" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700">Submit</button>
            </div>
        </form>

        <!-- Result Section -->
        <div id="result" class="mt-6 p-4 bg-gray-200 rounded-md hidden">
            <h2 class="text-lg font-bold">Result:</h2>
            <pre id="result-content" class="text-gray-700"></pre>
        </div>
    </div>
    <script>
        document.getElementById('submit-button').addEventListener('click', () => {
            const enrollmentTime = document.getElementById('enrollment_time').value;
            const session = document.getElementById('session').value;
            const enrollmentYear = document.getElementById('enrollment_year').value;
            const field = document.getElementById('field').value;
            const course = document.getElementById('course').value;

            const url = `http://127.0.0.1:5000/search?session=${encodeURIComponent(session)}&enrollment_time=${encodeURIComponent(enrollmentTime)}&enrollment_year=${encodeURIComponent(enrollmentYear)}&field=${encodeURIComponent(field)}&course=${encodeURIComponent(course)}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const resultSection = document.getElementById('result');
                    const resultContent = document.getElementById('result-content');
                    resultContent.textContent = JSON.stringify(data, null, 2);
                    resultSection.classList.remove('hidden');
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while fetching the data.');
                });
        });
    </script></script>
</body>
</html>